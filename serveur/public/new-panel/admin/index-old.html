<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Admin - TwitchBot</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/admin.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="navbar-left">
            <div class="logo">
                <h2>ü§ñ TwitchBot Admin</h2>
            </div>
        </div>
        
        <div class="navbar-center">
            <a href="/" class="nav-link">
                üè† Accueil
            </a>
            </a>
            <a href="/commands" class="nav-link">
                üìã Commandes
            </a>
        </div>
        
        <div class="navbar-right">
            <div class="user-info">
                <img id="user-avatar" class="user-avatar" src="" alt="Avatar">
                <span id="user-name">Chargement...</span>
                <span class="admin-badge">üëë Admin</span>
            </div>
            <button class="btn btn-secondary btn-sm" onclick="logout()">
                üö™ D√©connexion
            </button>
        </div>
    </nav>

    <div class="container">
        <!-- Admin Header -->
        <section class="admin-header">
            <h1 class="page-title">
                ‚öôÔ∏è Panel d'<span class="gradient-text">Administration</span>
            </h1>
            <p class="page-subtitle">
                G√©rez enti√®rement votre bot Twitch et vos giveaways
            </p>
        </section>

        <!-- Bot Status -->
        <section class="status-section">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">ü§ñ Statut du Bot</h3>
                    <div class="bot-controls">
                        <button class="btn btn-success btn-sm">
                            ‚ñ∂Ô∏è Red√©marrer
                        </button>
                        <button class="btn btn-error btn-sm">
                            ‚èπÔ∏è Arr√™ter
                        </button>
                    </div>
                </div>
                
                <div class="bot-status-grid">
                    <div class="status-item">
                        <div class="status-icon">üì°</div>
                        <div class="status-content">
                            <div class="status-label">Statut</div>
                            <div id="bot-status" class="status status-online">‚úÖ En ligne</div>
                        </div>
                    </div>
                    
                    <div class="status-item">
                        <div class="status-icon">‚è±Ô∏è</div>
                        <div class="status-content">
                            <div class="status-label">Uptime</div>
                            <div id="bot-uptime" class="status-value">3h 24m</div>
                        </div>
                    </div>
                    
                    <div class="status-item">
                        <div class="status-icon">üí¨</div>
                        <div class="status-content">
                            <div class="status-label">Commandes utilis√©es</div>
                            <div id="commands-used" class="status-value">1,247</div>
                        </div>
                    </div>
                    
                    <div class="status-item">
                        <div class="status-icon">üë•</div>
                        <div class="status-content">
                            <div class="status-label">Utilisateurs actifs</div>
                            <div id="active-users" class="status-value">156</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Admin Tabs -->
        <section class="admin-tabs">
            <div class="tab-buttons">
                <button class="tab-btn active" onclick="switchTab('giveaways')">
                    üéÅ Giveaways
                </button>
            </div>

            <!-- Giveaways Tab -->
            <div id="tab-giveaways" class="tab-content active">
                <div class="tab-header">
                    <h3>üéÅ Gestion des Giveaways</h3>
                    <button class="btn btn-primary" onclick="createGiveaway()">
                        + Cr√©er un Giveaway
                    </button>
                </div>

                <div class="giveaway-stats">
                    <div class="stat-card">
                        <div class="stat-icon">üî•</div>
                        <div class="stat-value" id="admin-active-giveaways">0</div>
                        <div class="stat-label">Actifs</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-value" id="admin-total-participants">0</div>
                        <div class="stat-label">Participants Total</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üèÅ</div>
                        <div class="stat-value" id="admin-ended-giveaways">0</div>
                        <div class="stat-label">Termin√©s</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-value" id="admin-total-value">0‚Ç¨</div>
                        <div class="stat-label">Valeur Totale</div>
                    </div>
                </div>

                <div class="admin-giveaways-list" id="admin-giveaways-list">
                    <div class="loading">Chargement des giveaways...</div>
                </div>
            </div>

            <!-- Onglets Commands, Utilisateurs et Webhook supprim√©s -->
        </section>
    </div>

    <!-- Create Giveaway Modal -->
    <div id="create-giveaway-modal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 class="modal-title">üéÅ Cr√©er un Nouveau Giveaway</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="create-giveaway-form">
                    <div class="form-group">
                        <label class="form-label">Titre du Giveaway *</label>
                        <input type="text" name="titre" class="form-input" placeholder="Ex: Clavier m√©canique RGB Gaming" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Description</label>
                        <textarea name="description" class="form-input form-textarea" placeholder="D√©crivez le giveaway, les conditions de participation, etc."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">URL de l'image</label>
                        <input type="url" name="image" class="form-input" placeholder="https://exemple.com/image.jpg">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Prix/R√©compense</label>
                        <input type="text" name="prix" class="form-input" placeholder="Ex: Clavier m√©canique RGB, Jeu Steam, etc.">
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Nombre de gagnants</label>
                            <input type="number" name="nb_reward" class="form-input" min="1" value="1">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Prix en ‚Ç¨ (optionnel)</label>
                            <input type="number" name="cashprize" class="form-input" step="0.01" min="0" placeholder="0.00">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Date de tirage (optionnel)</label>
                        <input type="datetime-local" name="date_tirage" class="form-input">
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            ‚úÖ Cr√©er le Giveaway
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="closeModal()">
                            ‚ùå Annuler
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Create Command Modal -->
    <div id="create-command-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">üìã Ajouter une Commande</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="create-command-form">
                    <div class="form-group">
                        <label class="form-label">Nom de la commande *</label>
                        <input type="text" name="name" class="form-input" placeholder="Ex: discord" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">R√©ponse *</label>
                        <textarea name="response" class="form-input form-textarea" placeholder="La r√©ponse de la commande" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Description</label>
                        <input type="text" name="description" class="form-input" placeholder="Description de la commande">
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            ‚úÖ Cr√©er la Commande
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="closeModal()">
                            ‚ùå Annuler
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notification-container"></div>

    <script src="/assets/js/common.js"></script>
    <script src="/assets/js/admin.js"></script>
    <script>
        // Fonction de test pour cr√©er un giveaway
        function createGiveaway() {
            console.log('createGiveaway called');
            if (typeof openModal === 'function') {
                openModal('create-giveaway-modal');
            } else {
                console.error('openModal function not found');
            }
        }
    </script>
</body>
</html>